name: 'Backup ODI Scenaroios Action'
description: 'Backs-up the scenarios currently installed on ODI (if any) prior to installing the new ones, contained in the RITM directory.'
inputs:
  RITM:
    description: "The name of the RITM to be deployed"
    required: true
  odiUrl:
    description: "The JDBC URL of the target ODI repository"
    required: true
  odiSchema: 
    description: "The schema of the target ODI repository"
    required: true
  odiSchemaPwd: 
    description: "The password used for connecting to the schema of the target ODI repository"
    required: true
  odiWorkRepository:
    description: "The name of the target ODI work repository"
    required: true
  odiUsername:
    description: "The username used in order to connect to the ODI instance"
    required: true
  odiUserPwd:
    description: "The password of the user used to connect to the ODI instance"
    required: true
  backupDirectory:
    description: "The absolute path to the directory the backed up scenarios will be stored in"
    required: true

runs:
  using: "composite" 
  steps:
    - name: Make executeable
      run: chmod +x ${{ github.action_path }}/backupOdiScenarios.sh
      shell: bash
    - id: backup-scenarios
      run: ${{ github.action_path }}/backupOdiScenarios.sh ${{ inputs.RITM }} ${{ inputs.odiUrl }} ${{ inputs.odiSchema }} ${{ inputs.odiSchemaPwd }} ${{ inputs.odiWorkRepository }} ${{ inputs.odiUsername }} ${{ inputs.odiUserPwd }} ${{inputs.backupDirectory}}
      shell: bash
